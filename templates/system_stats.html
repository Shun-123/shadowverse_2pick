{% extends "base.html" %}
{% block content %}
<div class="card">
    <h2>ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆ</h2>
    
    <!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±è¨ˆ -->
    <h3>ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0;">
        <div style="background: #f7fafc; padding: 1rem; border-radius: 8px; text-align: center;">
            <div style="font-size: 2em; font-weight: bold; color: var(--primary);">{{ stats.database.total_cards }}</div>
            <div>ç·ã‚«ãƒ¼ãƒ‰æ•°</div>
        </div>
        <div style="background: #f7fafc; padding: 1rem; border-radius: 8px; text-align: center;">
            <div style="font-size: 2em; font-weight: bold; color: var(--primary);">{{ stats.database.total_metrics }}</div>
            <div>è©•ä¾¡æ¸ˆã¿ã‚«ãƒ¼ãƒ‰</div>
        </div>
    </div>
    
    <!-- ã‚­ãƒ£ãƒƒã‚·ãƒ¥çµ±è¨ˆ -->
    <h3>âš¡ ã‚­ãƒ£ãƒƒã‚·ãƒ¥</h3>
    <div style="background: #f9f9f9; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
            <div>
                <strong>ã‚µã‚¤ã‚º:</strong> {{ stats.cache.size }}/{{ stats.cache.max_size }}
            </div>
            <div>
                <strong>ãƒ’ãƒƒãƒˆç‡:</strong> {{ '%.1f' % (stats.cache.hit_rate * 100) }}%
            </div>
            <div>
                <strong>ç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:</strong> {{ stats.cache.total_requests }}
            </div>
        </div>
        
        <button onclick="clearCache()" class="btn" style="background: var(--warning); margin-top: 1rem;">
            ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
        </button>
    </div>
    
    <!-- ãƒ¡ã‚¿æƒ…å ± -->
    <h3>ğŸ“ˆ ãƒ¡ã‚¿ç’°å¢ƒ</h3>
    <div class="alert alert-info">
        <strong>{{ stats.meta_info.meta_description }}</strong>
        <br>ãƒ†ã‚£ã‚¢: {{ stats.meta_info.tier_info }}
        <br>æœ€çµ‚æ›´æ–°: {{ stats.meta_info.last_updated }}
    </div>
</div>

<script>
function clearCache() {
    if (confirm('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
        fetch('/api/cache/clear', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'}
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
            if (data.success) {
                location.reload();
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
        });
    }
}
</script>
{% endblock %}
